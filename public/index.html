<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WGauto CRM - Modular</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/modules.css">
</head>
<body>
    <!-- Authentication Screen -->
    <div id="authScreen" class="auth-container">
        <div class="auth-form">
            <div class="auth-title">WGauto CRM</div>
            
            <div id="loginForm">
                <h3 style="margin-bottom: 20px;">Login</h3>
                <div class="form-group">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" placeholder="Password" required>
                </div>
                <button class="btn" onclick="Auth.login()">Login</button>
                <p style="margin-top: 15px; color: #ccc;">
                    Don't have an account? 
                    <a href="#" onclick="Auth.showRegisterForm()" style="color: #4CAF50;">Register</a>
                </p>
            </div>

            <div id="registerForm" style="display: none;">
                <h3 style="margin-bottom: 20px;">Register</h3>
                <div class="form-group">
                    <input type="email" id="registerEmail" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" placeholder="Password" required>
                </div>
                <button class="btn" onclick="Auth.register()">Register</button>
                <p style="margin-top: 15px; color: #ccc;">
                    Already have an account? 
                    <a href="#" onclick="Auth.showLoginForm()" style="color: #4CAF50;">Login</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="appScreen" class="container" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">WGauto CRM</div>
            <button class="nav-item active" onclick="showSection('dashboard')">üìä Dashboard</button>
            <button class="nav-item" onclick="showSection('cars')">üöó Cars</button>
            <button class="nav-item" onclick="showSection('rentals')">üìÖ Rentals</button>
            <button class="nav-item" onclick="showSection('warehouse')">üì¶ Warehouse</button>
            <button class="nav-item" onclick="showSection('pos')">üí≥ POS</button>
            <button class="nav-item" id="adminNav" onclick="showSection('admin')" style="display: none;">‚öôÔ∏è Admin</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="user-info">
                    <span id="userEmail"></span>
                    <button class="logout-btn" onclick="Auth.logout()">Logout</button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard" class="section active">
                <div class="stats-grid" id="statsGrid"></div>
            </div>

            <div id="modalsContainer">
    <!-- Add Car Modal -->
    <div id="addCarModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addCarModal')">&times;</span>
            <h2>Add New Car</h2>
            <div class="form-group">
                <label>Brand</label>
                <input type="text" id="carBrand" required>
            </div>
            <div class="form-group">
                <label>Model</label>
                <input type="text" id="carModel" required>
            </div>
            <div class="form-group">
                <label>Year</label>
                <input type="number" id="carYear" min="1950" max="2030">
            </div>
            <div class="form-group">
                <label>VIN</label>
                <input type="text" id="carVin">
            </div>
            <div class="form-group">
                <label>Purchase Price</label>
                <input type="number" id="carPrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label>Currency</label>
                <select id="carCurrency" required>
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (‚Ç¨)</option>
                    <option value="GEL">GEL (‚Çæ)</option>
                    <option value="RUB">RUB (‚ÇΩ)</option>
                </select>
            </div>
            <button class="btn" onclick="addCar()">Add Car</button>
        </div>
    </div>

    <!-- Car Details Modal -->
    <div id="carDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('carDetailsModal')">&times;</span>
            <h2 id="carDetailsTitle">Car Details</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="showCarTab('info')">Info</button>
                <button class="tab" onclick="showCarTab('finances')">Finances</button>
                <button class="tab" onclick="showCarTab('rentals')">Rental History</button>
            </div>

            <div id="carInfo" class="tab-content active">
                <div id="carInfoContent"></div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-danger" onclick="dismantleCar()">üîß Dismantle Car</button>
                </div>
            </div>

            <div id="carFinances" class="tab-content">
                <div class="profit-summary" id="carProfitSummary"></div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                    <div>
                        <h3>Add Expense</h3>
                        <div class="form-group">
                            <label>Amount</label>
                            <input type="number" id="expenseAmount" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label>Currency</label>
                            <select id="expenseCurrency" required>
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (‚Ç¨)</option>
                                <option value="GEL">GEL (‚Çæ)</option>
                                <option value="RUB">RUB (‚ÇΩ)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="expenseCategory" required>
                                <option value="repair">Repair</option>
                                <option value="fuel">Fuel</option>
                                <option value="insurance">Insurance</option>
                                <option value="maintenance">Maintenance</option>
                                <option value="parking">Parking</option>
                                <option value="wash">Car Wash</option>
                                <option value="parts">Parts Purchase</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" id="expenseDescription" placeholder="Optional">
                        </div>
                        <button class="btn" onclick="addExpense()">Add Expense</button>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Transaction History</h3>
                <table class="table" id="carTransactions">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Amount</th>
                            <th>Category</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="carRentals" class="tab-content">
                <table class="table" id="carRentalsTable">
                    <thead>
                        <tr>
                            <th>Client</th>
                            <th>Period</th>
                            <th>Daily Price</th>
                            <th>Total</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Add Rental Modal -->
    <div id="addRentalModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addRentalModal')">&times;</span>
            <h2>New Rental</h2>
            <div class="form-group">
                <label>Car</label>
                <select id="rentalCar" required>
                    <option value="">Select a car...</option>
                </select>
            </div>
            <div class="form-group">
                <label>Client Name</label>
                <input type="text" id="rentalClient" required>
            </div>
            <div class="form-group">
                <label>Client Phone</label>
                <input type="tel" id="rentalPhone">
            </div>
            <div class="form-group">
                <label>Start Date</label>
                <input type="date" id="rentalStart" required>
            </div>
            <div class="form-group">
                <label>End Date</label>
                <input type="date" id="rentalEnd" required>
            </div>
            <div class="form-group">
                <label>Daily Price</label>
                <input type="number" id="rentalPrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label>Currency</label>
                <select id="rentalCurrency" required>
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (‚Ç¨)</option>
                    <option value="GEL">GEL (‚Çæ)</option>
                    <option value="RUB">RUB (‚ÇΩ)</option>
                </select>
            </div>
            <button class="btn" onclick="addRental()">Create Rental</button>
        </div>
    </div>

    <!-- Warehouse Modals (–±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Warehouse.createModals()) -->
    <!-- –ù–æ –¥–æ–±–∞–≤–∏–º –æ–¥–∏–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –º–æ–¥–∞–ª –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Å–º–µ–Ω -->
    
    <!-- Shift History Modal -->
    <div id="shiftHistoryModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close" onclick="Utils.closeModal('shiftHistoryModal')">&times;</span>
            <h2>–ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω</h2>
            <div id="shiftHistoryList"></div>
        </div>
    </div>
</div>

<!-- 
   –í–ê–ñ–ù–û: –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é Warehouse –≤ main content.
   –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é —Å id="warehouse" –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –µ—ë –Ω–∞ —ç—Ç–æ:
-->

<!-- Warehouse Section -->
<div id="warehouse" class="section">
    <div id="warehouseContent">
        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Warehouse.init() -->
    </div>
</div>

<!-- 
   –í–ê–ñ–ù–û: –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é POS 
   –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é –¥–ª—è POS –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç, –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é:
-->

<!-- POS Section (–¥–æ–±–∞–≤–∏—Ç—å –≤ sidebar navigation) -->
<!-- –í sidebar –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫—É: -->
<!-- <button class="nav-item" onclick="showSection('pos')">üí∞ –ö–∞—Å—Å–∞ (POS)</button> -->

<!-- –ò –¥–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ü–∏—é –≤ main-content: -->
<div id="pos" class="section">
    <div id="posContent">
        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ POS.init() -->
    </div>
</div>

<!-- 
   –°–ö–†–ò–ü–¢–´: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ JS —Ñ–∞–π–ª—ã
   –ü–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º —Ç–µ–≥–æ–º </body> –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
-->
<script src="js/warehouse.js"></script>
<script src="js/pos.js"></script>
<script src="app.js"></script>


            <!-- Admin Section -->
            <div id="admin" class="section">
                <div class="section-title">Admin Panel</div>
                <table class="table" id="usersTable">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Registered</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modals Container (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –º–æ–¥—É–ª—è–º–∏) -->
    <div id="modalsContainer"></div>

    <!-- Scripts - –ü–û–†–Ø–î–û–ö –í–ê–ñ–ï–ù! -->
    <script src="js/utils.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/cars.js"></script>
    <script src="js/rentals.js"></script>
    <script src="js/warehouse.js"></script>
    <script src="js/pos.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
