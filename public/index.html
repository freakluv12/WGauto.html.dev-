<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WGauto CRM - Warehouse Management</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Authentication Screen -->
    <div id="authScreen" class="auth-container">
        <div class="auth-form">
            <div class="auth-title">WGauto CRM</div>
            
            <div id="loginForm">
                <h3 style="margin-bottom: 20px;">Login</h3>
                <div class="form-group">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" placeholder="Password" required>
                </div>
                <button class="btn" onclick="attemptLogin()">Login</button>
                <p style="margin-top: 15px; color: #ccc;">
                    Don't have an account? 
                    <a href="#" onclick="showRegisterForm()" style="color: #4CAF50;">Register</a>
                </p>
            </div>

            <div id="registerForm" style="display: none;">
                <h3 style="margin-bottom: 20px;">Register</h3>
                <div class="form-group">
                    <input type="email" id="registerEmail" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" placeholder="Password" required>
                </div>
                <button class="btn" onclick="attemptRegister()">Register</button>
                <p style="margin-top: 15px; color: #ccc;">
                    Already have an account? 
                    <a href="#" onclick="showLoginForm()" style="color: #4CAF50;">Login</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="appScreen" class="container" style="display: none;">
        <div class="sidebar">
            <div class="logo">WGauto CRM</div>
            <button class="nav-item active" onclick="showSection('dashboard')">üìä Dashboard</button>
            <button class="nav-item" onclick="showSection('cars')">üöó Cars</button>
            <button class="nav-item" onclick="showSection('rentals')">üìÖ Rentals</button>
            <button class="nav-item" onclick="showSection('warehouse')">üì¶ Warehouse</button>
            <button class="nav-item" onclick="showSection('pos')">üõí –ö–∞—Å—Å–∞</button>
            <button class="nav-item" id="adminNav" onclick="showSection('admin')" style="display: none;">‚öôÔ∏è Admin</button>
        </div>

        <div class="main-content">
            <div class="header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="user-info">
                    <span id="userEmail"></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard" class="section active">
                <div class="stats-grid" id="statsGrid">
                    <!-- Stats will be loaded here -->
                </div>
            </div>

            <!-- Cars Section -->
            <div id="cars" class="section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div class="section-title">Cars</div>
                    <button class="btn" onclick="showAddCarModal()">+ Add Car</button>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <input type="text" id="carSearch" placeholder="Search by brand, model, VIN..." 
                           style="width: 300px; padding: 10px; border: 1px solid #555; border-radius: 4px; background: #3d3d3d; color: #fff;"
                           oninput="searchCars()">
                    <select id="carStatusFilter" onchange="filterCars()" 
                            style="margin-left: 10px; padding: 10px; border: 1px solid #555; border-radius: 4px; background: #3d3d3d; color: #fff;">
                        <option value="">All Statuses</option>
                        <option value="active">Active</option>
                        <option value="rented">Rented</option>
                        <option value="repair">Repair</option>
                        <option value="sold">Sold</option>
                        <option value="dismantled">Dismantled</option>
                    </select>
                </div>
                
                <div class="cars-grid" id="carsGrid">
                    <!-- Cars will be loaded here -->
                </div>
            </div>

            <!-- Rentals Section -->
            <div id="rentals" class="section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div class="section-title">Rentals</div>
                    <button class="btn" onclick="showAddRentalModal()">+ New Rental</button>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="showRentalTab('active')">Active Rentals</button>
                    <button class="tab" onclick="showRentalTab('calendar')">Calendar</button>
                    <button class="tab" onclick="showRentalTab('history')">History</button>
                </div>

                <div id="activeRentals" class="tab-content active">
                    <table class="table" id="activeRentalsTable">
                        <thead>
                            <tr>
                                <th>Car</th>
                                <th>Client</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Daily Price</th>
                                <th>Total</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <div id="rentalCalendar" class="tab-content">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <button class="btn" onclick="changeMonth(-1)">‚Äπ Previous</button>
                        <h3 id="calendarTitle"></h3>
                        <button class="btn" onclick="changeMonth(1)">Next ‚Ä∫</button>
                    </div>
                    <div id="calendar" class="calendar"></div>
                </div>

                <div id="rentalHistory" class="tab-content">
                    <table class="table" id="historyTable">
                        <thead>
                            <tr>
                                <th>Car</th>
                                <th>Client</th>
                                <th>Period</th>
                                <th>Total</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Warehouse Section -->
            <div id="warehouse" class="section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <div class="section-title">Warehouse Management</div>
                </div>

                <!-- Warehouse Tabs -->
                <div class="tabs" id="warehouseTabs" style="display: none;">
                    <button class="tab active" onclick="showWarehouseTab('stock')">üì¶ –°–∫–ª–∞–¥</button>
                    <button class="tab" onclick="showWarehouseTab('analytics')">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
                </div>

                <!-- Stock Tab Content -->
                <div id="warehouseStockTab" class="warehouse-tab-content active">
                    <!-- Warehouse Action Bar -->
                    <div id="warehouseActionBar" class="warehouse-action-bar">
                        <button class="btn" onclick="showReceivingInterface()">üì• –û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ</button>
                        <button class="btn" onclick="showWarehouseAction('sell')">üí∞ –ü—Ä–æ–¥–∞–∂–∞</button>
                        <button class="btn btn-disabled" disabled title="–í–µ–¥—É—Ç—Å—è —Ä–∞–±–æ—Ç—ã">üõí –ó–∞–∫—É–ø–∫–∞ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</button>
                    </div>

                    <div id="warehouseContent">
                        <!-- Dynamic warehouse content -->
                    </div>
                </div>

                <!-- Analytics Tab Content -->
                <div id="warehouseAnalyticsTab" class="warehouse-tab-content">
                    <div style="background: #2d2d2d; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 20px; color: #4CAF50;">–§–∏–ª—å—Ç—Ä—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <!-- Date Range -->
                            <div class="form-group">
                                <label>–ü–µ—Ä–∏–æ–¥ —Å:</label>
                                <input type="date" id="analyticsStartDateFilter">
                            </div>
                            <div class="form-group">
                                <label>–ü–µ—Ä–∏–æ–¥ –ø–æ:</label>
                                <input type="date" id="analyticsEndDateFilter">
                            </div>

                            <!-- Sales Filter -->
                            <div class="form-group">
                                <label>–ü—Ä–æ–¥–∞–∂–∏:</label>
                                <div style="display: flex; gap: 5px;">
                                    <select id="analyticsSalesCompare">
                                        <option value="">–í—Å–µ</option>
                                        <option value="more">–ë–æ–ª—å—à–µ</option>
                                        <option value="less">–ú–µ–Ω—å—à–µ</option>
                                    </select>
                                    <input type="number" id="analyticsSalesValue" placeholder="0" style="width: 100px;">
                                </div>
                            </div>

                            <!-- Revenue Filter -->
                            <div class="form-group">
                                <label>–í—ã—Ä—É—á–∫–∞:</label>
                                <div style="display: flex; gap: 5px;">
                                    <select id="analyticsRevenueCompare">
                                        <option value="">–í—Å–µ</option>
                                        <option value="more">–ë–æ–ª—å—à–µ</option>
                                        <option value="less">–ú–µ–Ω—å—à–µ</option>
                                    </select>
                                    <input type="number" id="analyticsRevenueValue" placeholder="0" step="0.01" style="width: 100px;">
                                </div>
                            </div>

                            <!-- Profit Filter -->
                            <div class="form-group">
                                <label>–ü—Ä–∏–±—ã–ª—å:</label>
                                <div style="display: flex; gap: 5px;">
                                    <select id="analyticsProfitCompare">
                                        <option value="">–í—Å–µ</option>
                                        <option value="more">–ë–æ–ª—å—à–µ</option>
                                        <option value="less">–ú–µ–Ω—å—à–µ</option>
                                    </select>
                                    <input type="number" id="analyticsProfitValue" placeholder="0" step="0.01" style="width: 100px;">
                                </div>
                            </div>

                            <!-- Margin Filter -->
                            <div class="form-group">
                                <label>–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (%):</label>
                                <div style="display: flex; gap: 5px;">
                                    <select id="analyticsMarginCompare">
                                        <option value="">–í—Å–µ</option>
                                        <option value="more">–ë–æ–ª—å—à–µ</option>
                                        <option value="less">–ú–µ–Ω—å—à–µ</option>
                                    </select>
                                    <input type="number" id="analyticsMarginValue" placeholder="0" step="0.1" style="width: 100px;">
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 20px; display: flex; gap: 10px;">
                            <button class="btn" onclick="loadWarehouseAnalytics()">üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                            <button class="btn" onclick="resetAnalyticsFilters()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                        </div>
                    </div>

                    <!-- Analytics Results -->
                    <div id="analyticsResults" style="background: #2d2d2d; padding: 20px; border-radius: 12px;">
                        <h3 style="margin-bottom: 15px; color: #4CAF50;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞ –ø–µ—Ä–∏–æ–¥: <span id="analyticsPeriodDisplay"></span></h3>
                        
                        <!-- Summary Cards -->
                        <div class="profit-summary" id="analyticsSummaryCards"></div>

                        <!-- Analytics Table Container -->
                        <div style="overflow-x: auto; margin-top: 30px;">
                            <table class="table analytics-table" id="warehouseAnalyticsTable">
                                <thead>
                                    <tr style="position: sticky; top: 0; background: #3d3d3d; z-index: 10;">
                                        <th onclick="sortAnalyticsByColumn('name')" style="cursor: pointer;">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</th>
                                        <th onclick="sortAnalyticsByColumn('category')" style="cursor: pointer;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                        <th onclick="sortAnalyticsByColumn('sku')" style="cursor: pointer;">SKU</th>
                                        <th onclick="sortAnalyticsByColumn('sales')" style="cursor: pointer;">–ü—Ä–æ–¥–∞–∂–∏ (—à—Ç)</th>
                                        <th onclick="sortAnalyticsByColumn('revenue')" style="cursor: pointer;">–í—ã—Ä—É—á–∫–∞</th>
                                        <th onclick="sortAnalyticsByColumn('cost')" style="cursor: pointer;">–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å</th>
                                        <th onclick="sortAnalyticsByColumn('profit')" style="cursor: pointer;">–ü—Ä–∏–±—ã–ª—å</th>
                                        <th onclick="sortAnalyticsByColumn('margin')" style="cursor: pointer;">–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å (%)</th>
                                    </tr>
                                </thead>
                                <tbody id="analyticsTableBody">
                                    <!-- Analytics data will be loaded here -->
                                </tbody>
                                <tfoot id="analyticsTableFooter" style="position: sticky; bottom: 0; background: #4CAF50; font-weight: bold;">
                                    <!-- Totals will be loaded here -->
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Section -->
            <div id="admin" class="section">
                <div class="section-title">Admin Panel</div>
                <table class="table" id="usersTable">
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Registered</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <!-- POS Section (NEW) -->
            <div id="pos" class="section">
                <div class="section-title">–ö–∞—Å—Å–∞ (POS)</div>
                
                <div class="pos-container">
                    <!-- Left Panel - Product Selection -->
                    <div class="pos-left">
                        <div class="pos-search">
                            <input type="text" id="posSearchInput" placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞..." oninput="searchPOSProducts()">
                        </div>
                        
                        <div class="pos-breadcrumb" id="posBreadcrumb">
                            <div class="pos-breadcrumb-item" onclick="loadPOSCategories()">üì¶ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
                        </div>
                        
                        <div class="pos-items-list" id="posItemsList">
                            <!-- Dynamic content: categories ‚Üí subcategories ‚Üí products -->
                        </div>
                    </div>
                    
                    <!-- Right Panel - Receipt -->
                    <div class="pos-right">
                        <div class="pos-receipt-header">üßæ –ß–ï–ö</div>
                        
                        <div class="pos-receipt-items" id="posReceiptItems">
                            <div class="pos-receipt-empty">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</div>
                        </div>
                        
                        <div class="pos-totals" id="posTotals" style="display: none;">
                            <div class="pos-total-row">
                                <span>–¢–æ–≤–∞—Ä–æ–≤:</span>
                                <span id="posTotalItems">0</span>
                            </div>
                            <div class="pos-total-row final">
                                <span>–ò–¢–û–ì–û:</span>
                                <span id="posTotalAmount">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="pos-actions">
                            <button class="pos-btn pos-btn-clear" onclick="clearPOSReceipt()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                            <button class="pos-btn pos-btn-complete" id="posCompleteBtn" onclick="showPOSCheckout()" disabled>üí≥ –ü—Ä–æ–¥–∞–∂–∞</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- All existing modals remain the same -->
    
    <!-- Add Car Modal -->
    <div id="addCarModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addCarModal')">&times;</span>
            <h2>Add New Car</h2>
            <div class="form-group">
                <label>Brand</label>
                <input type="text" id="carBrand" required>
            </div>
            <div class="form-group">
                <label>Model</label>
                <input type="text" id="carModel" required>
            </div>
            <div class="form-group">
                <label>Year</label>
                <input type="number" id="carYear" min="1950" max="2030">
            </div>
            <div class="form-group">
                <label>VIN</label>
                <input type="text" id="carVin">
            </div>
            <div class="form-group">
                <label>Purchase Price</label>
                <input type="number" id="carPrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label>Currency</label>
                <select id="carCurrency" required>
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (‚Ç¨)</option>
                    <option value="GEL">GEL (‚Çæ)</option>
                    <option value="RUB">RUB (‚ÇΩ)</option>
                </select>
            </div>
            <button class="btn" onclick="addCar()">Add Car</button>
        </div>
    </div>

    <!-- Car Details Modal -->
    <div id="carDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('carDetailsModal')">&times;</span>
            <h2 id="carDetailsTitle">Car Details</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="showCarTab('info')">Info</button>
                <button class="tab" onclick="showCarTab('finances')">Finances</button>
                <button class="tab" onclick="showCarTab('rentals')">Rental History</button>
            </div>

            <div id="carInfo" class="tab-content active">
                <div id="carInfoContent"></div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-danger" onclick="dismantleCar()">üîß Dismantle Car</button>
                </div>
            </div>

            <div id="carFinances" class="tab-content">
                <div class="profit-summary" id="carProfitSummary"></div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                    <div>
                        <h3>Add Expense</h3>
                        <div class="form-group">
                            <label>Amount</label>
                            <input type="number" id="expenseAmount" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label>Currency</label>
                            <select id="expenseCurrency" required>
                                <option value="USD">USD ($)</option>
                                <option value="EUR">EUR (‚Ç¨)</option>
                                <option value="GEL">GEL (‚Çæ)</option>
                                <option value="RUB">RUB (‚ÇΩ)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="expenseCategory" required>
                                <option value="repair">Repair</option>
                                <option value="fuel">Fuel</option>
                                <option value="insurance">Insurance</option>
                                <option value="maintenance">Maintenance</option>
                                <option value="parking">Parking</option>
                                <option value="wash">Car Wash</option>
                                <option value="parts">Parts Purchase</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" id="expenseDescription" placeholder="Optional">
                        </div>
                        <button class="btn" onclick="addExpense()">Add Expense</button>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Transaction History</h3>
                <table class="table" id="carTransactions">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Amount</th>
                            <th>Category</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div id="carRentals" class="tab-content">
                <table class="table" id="carRentalsTable">
                    <thead>
                        <tr>
                            <th>Client</th>
                            <th>Period</th>
                            <th>Daily Price</th>
                            <th>Total</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Add Rental Modal -->
    <div id="addRentalModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addRentalModal')">&times;</span>
            <h2>New Rental</h2>
            <div class="form-group">
                <label>Car</label>
                <select id="rentalCar" required>
                    <option value="">Select a car...</option>
                </select>
            </div>
            <div class="form-group">
                <label>Client Name</label>
                <input type="text" id="rentalClient" required>
            </div>
            <div class="form-group">
                <label>Client Phone</label>
                <input type="tel" id="rentalPhone">
            </div>
            <div class="form-group">
                <label>Start Date</label>
                <input type="date" id="rentalStart" required>
            </div>
            <div class="form-group">
                <label>End Date</label>
                <input type="date" id="rentalEnd" required>
            </div>
            <div class="form-group">
                <label>Daily Price</label>
                <input type="number" id="rentalPrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label>Currency</label>
                <select id="rentalCurrency" required>
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (‚Ç¨)</option>
                    <option value="GEL">GEL (‚Çæ)</option>
                    <option value="RUB">RUB (‚ÇΩ)</option>
                </select>
            </div>
            <button class="btn" onclick="addRental()">Create Rental</button>
        </div>
    </div>

    <!-- Warehouse Modals -->

    <!-- Add Category Modal -->
    <div id="addCategoryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addCategoryModal')">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="categoryName" required>
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="categoryDescription" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>–ò–∫–æ–Ω–∫–∞ (emoji)</label>
                <input type="text" id="categoryIcon" placeholder="üì¶" maxlength="2">
            </div>
            <button class="btn" onclick="addCategory()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <!-- Add Subcategory Modal -->
    <div id="addSubcategoryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addSubcategoryModal')">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="subcategoryName" required>
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="subcategoryDescription" rows="3"></textarea>
            </div>
            <button class="btn" onclick="addSubcategory()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addProductModal')">&times;</span>
            <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="productName" required>
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="productDescription" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label>SKU / –ê—Ä—Ç–∏–∫—É–ª</label>
                <input type="text" id="productSKU">
            </div>
            <div class="form-group">
                <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞–ø–∞—Å–∞</label>
                <input type="number" id="productMinStock" value="0" min="0">
            </div>
            <button class="btn" onclick="addProduct()">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="productDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('productDetailsModal')">&times;</span>
            <h2 id="productDetailsName">Product Details</h2>
            <div style="margin-bottom: 20px; padding: 15px; background: #3d3d3d; border-radius: 8px;">
                <p><strong>SKU:</strong> <span id="productDetailsSKU"></span></p>
                <p><strong>–í—Å–µ–≥–æ –Ω–∞ —Å–∫–ª–∞–¥–µ:</strong> <span id="productDetailsTotal" style="font-weight: bold; color: #4CAF50;"></span></p>
            </div>

            <h3>–°–∫–ª–∞–¥—Å–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏</h3>
            <table class="table" id="productInventoryTable">
                <thead>
                    <tr>
                        <th>–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        <th>–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏</th>
                        <th>–ú–µ—Å—Ç–æ</th>
                        <th>–î–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</th>
                        <th>–ù–∞ —Å–∫–ª–∞–¥–µ</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Receive Inventory Modal -->
    <div id="receiveInventoryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('receiveInventoryModal')">&times;</span>
            <h2>–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h2>
            <p style="color: #ccc; margin-bottom: 15px;">–î–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞—Ç–∫–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Ç–æ–≤–∞—Ä—É</p>
            <div class="form-group">
                <label>–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</label>
                <select id="receiveSourceType" required>
                    <option value="purchased">–ó–∞–∫—É–ø–∫–∞</option>
                    <option value="dismantled">–° —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                <input type="number" id="receiveQuantity" min="1" required>
            </div>
            <div class="form-group">
                <label>–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏ (–∑–∞ –µ–¥–∏–Ω–∏—Ü—É)</label>
                <input type="number" id="receivePurchasePrice" step="0.01">
            </div>
            <div class="form-group">
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="receiveCurrency">
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (‚Ç¨)</option>
                    <option value="GEL">GEL (‚Çæ)</option>
                    <option value="RUB">RUB (‚ÇΩ)</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ú–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è</label>
                <input type="text" id="receiveLocation" placeholder="–°—Ç–µ–ª–ª–∞–∂ A-5">
            </div>
            <button class="btn" onclick="receiveInventory()">–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞—Ç—å</button>
        </div>
    </div>

    <!-- Sell Inventory Modal -->
    <div id="sellInventoryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('sellInventoryModal')">&times;</span>
            <h2>–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–∞</h2>
            <div class="form-group">
                <label>–ò—Å—Ç–æ—á–Ω–∏–∫ —Ç–æ–≤–∞—Ä–∞</label>
                <select id="sellSourceType" required>
                    <option value="stock">–°–æ —Å–∫–ª–∞–¥–∞</option>
                    <option value="dismantled">–° —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                <input type="number" id="sellQuantity" min="1" required>
            </div>
            <div class="form-group">
                <label>–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (–∑–∞ –µ–¥–∏–Ω–∏—Ü—É)</label>
                <input type="number" id="sellSalePrice" step="0.01" required>
            </div>
            <div class="form-group">
                <label>–í–∞–ª—é—Ç–∞</label>
                <select id="sellCurrency" required>
                    <option value="USD">USD ($)</option>
                    <option value="EUR">EUR (‚Ç¨)</option>
                    <option value="GEL">GEL (‚Çæ)</option>
                    <option value="RUB">RUB (‚ÇΩ)</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                <input type="text" id="sellBuyerName">
            </div>
            <div class="form-group">
                <label>–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–∫—É–ø–∞—Ç–µ–ª—è</label>
                <input type="tel" id="sellBuyerPhone">
            </div>
            <div class="form-group">
                <label>–ó–∞–º–µ—Ç–∫–∏</label>
                <textarea id="sellNotes" rows="2"></textarea>
            </div>
            <button class="btn" onclick="sellInventory()">–ü—Ä–æ–¥–∞—Ç—å</button>
        </div>
    </div>

    <!-- Procurement Modal -->
    <div id="procurementModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('procurementModal')">&times;</span>
            <h2>–ù–æ–≤–∞—è –∑–∞–∫—É–ø–∫–∞</h2>
            <p style="color: #ff9800; padding: 10px; background: #3d3d3d; border-radius: 8px; margin-bottom: 20px;">
                ‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
            </p>
        </div>
    </div>

    <!-- POS Checkout Modal (NEW) -->
    <div id="posCheckoutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('posCheckoutModal')">&times;</span>
            <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏</h2>
            
            <div style="margin-bottom: 20px;">
                <h3>–¢–æ–≤–∞—Ä—ã –≤ —á–µ–∫–µ:</h3>
                <div id="posCheckoutItemsList" style="max-height: 200px; overflow-y: auto; background: #3d3d3d; padding: 15px; border-radius: 8px; margin-top: 10px;">
                    <!-- Items list -->
                </div>
            </div>
            
            <div style="background: #3d3d3d; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                    <strong>–°—É–º–º–∞ –±–µ–∑ —Å–∫–∏–¥–∫–∏:</strong>
                    <strong id="posCheckoutSubtotal">$0.00</strong>
                </div>
                
                <div class="form-group">
                    <label>–°–∫–∏–¥–∫–∞:</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="posDiscountType" onchange="calculatePOSDiscount()">
                            <option value="none">–ë–µ–∑ —Å–∫–∏–¥–∫–∏</option>
                            <option value="percent">–ü—Ä–æ—Ü–µ–Ω—Ç (%)</option>
                            <option value="amount">–°—É–º–º–∞ ($)</option>
                        </select>
                        <input type="number" id="posDiscountValue" placeholder="0" min="0" step="0.01" oninput="calculatePOSDiscount()" disabled>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; color: #4CAF50; margin-top: 15px; padding-top: 15px; border-top: 2px solid #4CAF50;">
                    <span>–ö –û–ü–õ–ê–¢–ï:</span>
                    <span id="posCheckoutFinal">$0.00</span>
                </div>
            </div>
            
            <button class="btn" style="width: 100%; padding: 15px; font-size: 18px;" onclick="completePOSSale()">‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É</button>
        </div>
    </div>

    <!-- Receiving Interface Modal (NEW) -->
    <div id="receivingModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <span class="close" onclick="closeModal('receivingModal')">&times;</span>
            <h2>–û–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤</h2>
            
            <div style="margin-bottom: 20px;">
                <button class="btn" onclick="showReceivingSearch()">üîç –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
            </div>
            
            <div id="receivingItemsList">
                <p style="color: #ccc; text-align: center; padding: 40px;">
                    –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä" –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏—è
                </p>
            </div>
            
            <div style="margin-top: 20px; display: none;" id="receivingSaveBtn">
                <button class="btn" style="width: 100%; padding: 15px;" onclick="saveReceiving()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ</button>
            </div>
        </div>
    </div>

    <!-- Product Search Modal for Receiving (NEW) -->
    <div id="receivingSearchModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('receivingSearchModal')">&times;</span>
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä</h2>
            
            <div class="pos-search">
                <input type="text" id="receivingSearchInput" placeholder="üîç –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞..." oninput="searchReceivingProducts()">
            </div>
            
            <div class="pos-breadcrumb" id="receivingBreadcrumb">
                <div class="pos-breadcrumb-item" onclick="loadReceivingCategories()">üì¶ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
            </div>
            
            <div class="pos-items-list" id="receivingSearchList">
                <!-- Dynamic content -->
            </div>
        </div>
    </div>

    <!-- Edit Product Prices Modal (NEW) -->
    <div id="editProductModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('editProductModal')">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</h2>
            
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="editProductName" readonly style="background: #2d2d2d;">
            </div>
            
            <div class="form-group">
                <label>SKU</label>
                <input type="text" id="editProductSKU">
            </div>
            
            <div class="form-group">
                <label>–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏ ($)</label>
                <input type="number" id="editProductPurchasePrice" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label>–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ ($)</label>
                <input type="number" id="editProductSalePrice" step="0.01" min="0">
            </div>
            
            <div class="form-group">
                <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫</label>
                <input type="number" id="editProductMinStock" min="0">
            </div>
            
            <button class="btn" onclick="saveProductEdit()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
    </html>
